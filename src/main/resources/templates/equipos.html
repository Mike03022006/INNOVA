<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Equipos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; padding: 20px; }
        .table-container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
        .navbar-custom { background-color: #343a40; }
        .navbar-custom a { color: white !important; }
        .form-inline select, .form-inline input { margin-right: 10px; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark navbar-custom mb-4">
    <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/}">‚Üê Men√∫ Principal</a>
    </div>
</nav>

<div class="container table-container">
    <span class="text-muted" th:text="'Total: ' + ${#lists.size(equipos)} + ' equipos'">Total</span>
    <h1 class="mb-4 text-center">üìã Equipos Registrados</h1>

    <!-- Form sticky: usa los valores del modelo (campo/operador/valor) -->
    <form method="get" th:action="@{/equipos/buscar}" class="row g-2" id="form-busqueda">
        <div class="col-auto">
            <select name="campo" class="form-select" th:value="${campo}">
                <option value="tipo">Tipo</option>
                <option value="estado">Estado</option>
                <option value="serial">Serial</option>
                <option value="placa">Placa</option>
                <option value="caracteristicas">Caracter√≠sticas</option>
                <option value="modalidadDeAdquisicion">Modalidad</option>
                <option value="remisionDeProveedor">Remisi√≥n proveedor</option>
                <option value="fechaDeAdquisicion">Fecha de adquisici√≥n</option>
            </select>
        </div>

        <div class="col-auto">
            <select name="operador" class="form-select" th:value="${operador}">
                <option value="=">Igual</option>
                <option value="contiene">Contiene</option>
            </select>
        </div>

        <div class="col-auto">
            <input name="valor" class="form-control" placeholder="Valor a buscar" th:value="${valor}">
        </div>

        <div class="col-auto">
            <button class="btn btn-primary" type="submit">Buscar</button>
        </div>


        <div class="col-auto">
            <a class="btn btn-outline-secondary"
               th:href="@{/equipos/reporte(campo=${campo}, operador=${operador}, valor=${valor})}">
                Exportar PDF
            </a>

        </div>
    </form>

    <div class="table-responsive mt-3">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Serial</th>
                    <th>Placa</th>
                    <th>Tipo</th>
                    <th>Caracter√≠sticas</th>
                    <th>Estado</th>
                    <th>Modalidad</th>
                    <th>Costo de Adquisici√≥n</th>
                    <th>Fecha de adquisici√≥n</th>
                    <th>Remisi√≥n</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="equipo : ${equipos}">
                    <td th:text="${equipo.id}"></td>
                    <td th:text="${equipo.serial}"></td>
                    <td th:text="${equipo.placa}"></td>
                    <td th:text="${equipo.tipo}"></td>
                    <td th:text="${equipo.caracteristicas}"></td>
                    <td th:switch="${equipo.estado}">
                        <span class="badge bg-success" th:case="'1'">Activo</span>
                        <span class="badge bg-secondary" th:case="'0'">Inactivo</span>
                        <span class="badge bg-secondary" th:case="*">Inactivo</span>
                    </td>
                    <td th:text="${equipo.modalidadDeAdquisicion}"></td>
                    <td th:text="${equipo.costoDeAdquisicion}"></td>
                    <td th:text="${equipo.fechaDeAdquisicion}"></td>
                    <td th:text="${equipo.remisionDeProveedor}"></td>
                    <td>
                        <a th:href="@{/equipos/eliminar/{id}(id=${equipo.id})}" class="btn btn-danger btn-sm"
                           onclick="return confirm('¬øEst√°s seguro de eliminar este equipo?');">Eliminar</a>
                        <a th:href="@{/equipos/editar/{id}(id=${equipo.id})}" class="btn btn-warning btn-sm">Editar</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
